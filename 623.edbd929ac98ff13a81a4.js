(self.webpackChunkmirage=self.webpackChunkmirage||[]).push([[623],{8623:(t,e,r)=>{"use strict";r.r(e),r.d(e,{LoginModule:()=>A});var i=r(4387),o=r(1462),s=r(7368),n=r(7511),a=r(8665);let l=(()=>{class t{constructor(t,e){this.ref=t,this.config=e,this.config.closable||(this.config.closable=!1)}ngOnInit(){this.data=this.config.data}ngOnDestroy(){this.ref.close(!0)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(n.E7),s.Y36(n.S))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-popup-loading"]],decls:6,vars:1,consts:[[1,"p-d-flex","p-flex-column"],[1,"p-mb-2","p-as-center"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s._UZ(2,"p-progressSpinner"),s.qZA(),s.TgZ(3,"div",1),s.TgZ(4,"h5"),s._uU(5),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(5),s.Oqu(e.data.message))},directives:[a.G],styles:[".loader[_ngcontent-%COMP%]{border-radius:50%;border:16px solid #f3f3f3;border-top-color:#3498db;width:120px;height:120px;animation:spin 2s linear infinite}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}"]}),t})();var c=r(529),p=r(3796),u=r(9624),g=r(2290),d=r(1116),m=r(6726),f=r(9892),h=r(5407),Z=r(1146);const v=function(t,e){return{"layout-dark":t,"layout-light":e}},y=[{path:"",component:(()=>{class t{constructor(t,e,r,i,s,n,a){this.fb=t,this.service=e,this.router=r,this.route=i,this.titleTab=s,this.dialog=n,this.messageService=a,this.titleTab.setTitle("RMI Survey - Login"),this.forms=this.fb.group({login:["",o.kI.required],password:["",o.kI.required],db:c.N.db}),this.initialForm=this.forms.value}ngOnInit(){localStorage.removeItem("roleid"),localStorage.removeItem("menulink"),this.service.logout(),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/"}onSubmit(){if(this.forms.valid){const t=this.dialog.open(l,{data:{message:"Authentication..."}});this.service.login({jsonrpc:"2.0",params:this.forms.value}).subscribe(e=>{t.close(!0),e.result&&(this.service.storeLocal(e.result),this.router.navigate([this.returnUrl]))},e=>{if(t.close(!0),Array.isArray(e.error.error))for(var r=0;r<e.error.error.length;r++)this.messageService.add({key:"toast-notif",severity:"error",summary:"Error",detail:e.error.error[r]});else this.messageService.add({key:"toast-notif",severity:"error",summary:"Error",detail:e.error})})}}ngOnDestroy(){this.forms.reset(this.initialForm)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(o.qu),s.Y36(p.$),s.Y36(i.F0),s.Y36(i.gz),s.Y36(u.Dx),s.Y36(n.xA),s.Y36(g.ez))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-login"]],decls:32,vars:5,consts:[[1,"login-body",3,"ngClass"],[1,"login-content"],[1,"night-switch"],["styleClass","dark-switch","icon","pi pi-circle-on",3,"click"],["styleClass","light-switch","icon","pi pi-circle-off",3,"click"],[1,"login-panel"],[1,"login-panel-content"],[1,"logo"],[3,"formGroup","submit"],[1,"forms"],[1,"login-input-wrapper"],["for","username"],["id","username","pInputText","","placeholder","Type your username...","formControlName","login"],[1,"pi","pi-user"],["for","password"],["type","password","id","password","placeholder","Type your password","pPassword","","formControlName","password"],[1,"pi","pi-lock"],[1,"buttons"],["pButton","","type","submit","label","Login"],[2,"margin-top","50px"],[1,"desert"],["key","toast-notif"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s.TgZ(3,"p-button",3),s.NdJ("click",function(){return e.dark=!0}),s.qZA(),s.TgZ(4,"p-button",4),s.NdJ("click",function(){return e.dark=!1}),s.qZA(),s.qZA(),s.TgZ(5,"div",5),s.TgZ(6,"div",6),s._UZ(7,"div",7),s.TgZ(8,"h1"),s._uU(9,"Sign in to Risk Maturity Institute"),s.qZA(),s.TgZ(10,"p"),s._uU(11,"Welcome, please use the form to sign-in Risk Maturity Institute"),s.qZA(),s.TgZ(12,"form",8),s.NdJ("submit",function(){return e.onSubmit()}),s.TgZ(13,"div",9),s.TgZ(14,"div",10),s.TgZ(15,"label",11),s._uU(16,"Username"),s.qZA(),s._UZ(17,"input",12),s._UZ(18,"i",13),s.qZA(),s.TgZ(19,"div",10),s.TgZ(20,"label",14),s._uU(21,"Password"),s.qZA(),s._UZ(22,"input",15),s._UZ(23,"i",16),s.qZA(),s.TgZ(24,"div",17),s._UZ(25,"button",18),s.qZA(),s.qZA(),s.qZA(),s.TgZ(26,"div",19),s.TgZ(27,"p"),s.TgZ(28,"marquee"),s._uU(29,"@Copyright 2024"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s._UZ(30,"div",20),s.qZA(),s.qZA(),s._UZ(31,"p-toast",21)),2&t&&(s.Q6J("ngClass",s.WLB(2,v,e.dark,!e.dark)),s.xp6(12),s.Q6J("formGroup",e.forms))},directives:[d.mk,m.zx,o._Y,o.JL,o.sg,o.Fj,f.o,o.JJ,o.u,h.QK,m.Hq,Z.FN],styles:[".waviy[_ngcontent-%COMP%], .waviy[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative}.waviy[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;font-size:14px;color:#1c9ce5;text-transform:uppercase;animation:flip 2s infinite;animation-delay:calc(.2s * var(--i))}@keyframes flip{0%,80%{transform:rotateY(1turn)}}"]}),t})()}];let b=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[i.Bz.forChild(y)],i.Bz]}),t})();var q=r(1455);let A=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[g.ez],imports:[[q.I,b]]}),t})()}}]);