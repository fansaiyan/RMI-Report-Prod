(self.webpackChunkmirage=self.webpackChunkmirage||[]).push([[994],{7994:(e,t,i)=>{"use strict";i.r(t),i.d(t,{SMIModule:()=>V});var s=i(4387),a=i(6064),o=i(529),n=i(7368),l=i(9996),r=i(2693);let p=(()=>{class e{constructor(e){this.http=e}surveys(e){return this.http.get(`${o.N.url_smi}api/surveys`,{params:e})}upload_file(e){return this.http.post(`${o.N.url_smi}api/upload_file`,e).pipe((0,l.U)(e=>e))}uploaded_files(e){return this.http.get(`${o.N.url_smi}api/uploaded_files`,{params:e})}downloadFile(e){return this.http.get(`${o.N.url_smi}api/download_file?dokumen_id=${e}`,{responseType:"blob"})}get_final_calculation(e){return this.http.get(`${o.N.url_smi}api/final_calculation`,{params:e})}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(r.eN))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var c=i(2290),d=i(3796),u=i(1116),m=i(6397),g=i(7511),f=i(7762),Z=i(1956),h=i(9892);function _(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",10),n._UZ(1,"div"),n.TgZ(2,"div"),n.TgZ(3,"span",11),n._UZ(4,"i",12),n.TgZ(5,"input",13),n.NdJ("input",function(t){return n.CHM(e),n.oxw(),n.MAs(4).filterGlobal(t.target.value,"contains")}),n.qZA(),n.qZA(),n.qZA(),n.qZA()}}function v(e,t){1&e&&(n.TgZ(0,"tr"),n.TgZ(1,"th",14),n._uU(2,"Criteria "),n.TgZ(3,"span",15),n._UZ(4,"p-sortIcon",16),n.qZA(),n.qZA(),n.TgZ(5,"th",17),n._uU(6,"Self Assessment "),n.TgZ(7,"span",15),n._UZ(8,"p-sortIcon",16),n.qZA(),n.qZA(),n.TgZ(9,"th",17),n._uU(10,"Uploaded Doc "),n.TgZ(11,"span",15),n._UZ(12,"p-sortIcon",16),n.qZA(),n.qZA(),n.TgZ(13,"th",17),n._uU(14,"Diff "),n.TgZ(15,"span",15),n._UZ(16,"p-sortIcon",16),n.qZA(),n.qZA(),n.TgZ(17,"th",17),n._uU(18,"Final Result "),n.TgZ(19,"span",15),n._UZ(20,"p-sortIcon",16),n.qZA(),n.qZA(),n.TgZ(21,"th",17),n._uU(22,"Remarks "),n.TgZ(23,"span",15),n._UZ(24,"p-sortIcon",16),n.qZA(),n.qZA(),n.TgZ(25,"th",18),n._uU(26,"Pilih"),n.qZA(),n.qZA()),2&e&&(n.xp6(1),n.Q6J("pSortableColumn","sub_dimensi_name"),n.xp6(3),n.Q6J("field","sub_dimensi_name"),n.xp6(1),n.Q6J("pSortableColumn","self_asesment"),n.xp6(3),n.Q6J("field","self_asesment"),n.xp6(1),n.Q6J("pSortableColumn","uploaded_doc"),n.xp6(3),n.Q6J("field","uploaded_doc"),n.xp6(1),n.Q6J("pSortableColumn","diff"),n.xp6(3),n.Q6J("field","diff"),n.xp6(1),n.Q6J("pSortableColumn","final_result"),n.xp6(3),n.Q6J("field","final_result"),n.xp6(1),n.Q6J("pSortableColumn","remark"),n.xp6(3),n.Q6J("field","remark"))}function T(e,t){if(1&e&&(n.TgZ(0,"tr"),n.TgZ(1,"td",19),n._uU(2),n.qZA(),n.TgZ(3,"td",20),n._uU(4),n.qZA(),n.TgZ(5,"td",20),n._uU(6),n.qZA(),n.TgZ(7,"td",20),n._uU(8),n.qZA(),n.TgZ(9,"td",20),n._uU(10),n.qZA(),n.TgZ(11,"td",20),n._uU(12),n.qZA(),n._UZ(13,"td",20),n.qZA()),2&e){const e=t.$implicit;n.xp6(2),n.Oqu(e.sub_dimensi_name),n.xp6(2),n.Oqu(e.self_asesment),n.xp6(2),n.Oqu(e.uploaded_doc),n.xp6(2),n.Oqu(e.diff),n.xp6(2),n.Oqu(e.final_result),n.xp6(2),n.Oqu(e.remark)}}function q(e,t){1&e&&(n.TgZ(0,"tr"),n.TgZ(1,"td",20),n._uU(2," Data tidak Tersedia "),n.qZA(),n.qZA()),2&e&&(n.xp6(1),n.uIk("colspan",7))}const A=function(){return[30,50,75,100]},y=function(){return["sub_dimensi_name","self_asesment","uploaded_doc","diff","final_result","remark"]};let x=(()=>{class e{constructor(e,t,i){this.dialog=e,this.messageService=t,this.smiService=i,this.survey=null,this.email=null,this.smi_survey_code=null,this.loading=!1,this.listdata=[],this.msgs=[]}ngOnChanges(e){this.survey&&this.email&&this.smi_survey_code&&this.gets()}ngOnInit(){}gets(){const e={email:this.email,survey_code:this.smi_survey_code};this.loading&&(this.loading=!0),this.listdata=[],this.smiService.get_final_calculation(e).subscribe(e=>{e.data.length>0?this.listdata=e.data:this.messageService.add({key:"toast-notif",severity:"info",summary:"Informasi",detail:"Data Tidak Tesedia"}),this.loading=!1},e=>{this.loading=!1,this.messageService.add({key:"toast-notif",severity:"error",summary:"Error",detail:e.error})})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(g.xA),n.Y36(c.ez),n.Y36(p))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-final-calculation"]],inputs:{survey:"survey",email:"email",smi_survey_code:"smi_survey_code"},features:[n.TTD],decls:11,vars:10,consts:[[1,"card"],[1,"p-fluid"],[1,"p-col-12"],["styleClass","p-datatable-gridlines","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","rowHover","rows","rowsPerPageOptions","showCurrentPageReport","globalFilterFields"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"value"],[1,"p-d-flex","p-jc-between"],[1,"p-input-icon-left","p-ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search keyword",3,"input"],[2,"width","20%","text-align","center",3,"pSortableColumn"],[2,"float","right"],["ariaLabel","Activate to sort","ariaLabelDesc","Activate to sort in descending order","ariaLabelAsc","Activate to sort in ascending order",3,"field"],[2,"text-align","center",3,"pSortableColumn"],[2,"width","10%","text-align","center"],[2,"text-align","left"],[2,"text-align","center"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"p-table",3,4),n.YNc(5,_,6,0,"ng-template",5),n.YNc(6,v,27,12,"ng-template",6),n.YNc(7,T,14,6,"ng-template",7),n.YNc(8,q,3,1,"ng-template",8),n.qZA(),n.qZA(),n.TgZ(9,"div",2),n._UZ(10,"p-messages",9),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(3),n.Q6J("value",t.listdata)("paginator",!0)("rowHover",!0)("rows",30)("rowsPerPageOptions",n.DdM(8,A))("showCurrentPageReport",!0)("globalFilterFields",n.DdM(9,y)),n.xp6(7),n.Q6J("value",t.msgs))},directives:[f.iA,c.jx,Z.V,h.o,f.lQ,f.fz],styles:[""]}),e})();function b(e,t){if(1&e&&(n.TgZ(0,"div",2),n.TgZ(1,"p",10),n._uU(2),n.qZA(),n._UZ(3,"p"),n.TgZ(4,"p"),n._uU(5,"Silakan Klik Tautan Berikut untuk mengisi Survey SMI. "),n.TgZ(6,"a",11),n._uU(7,"KLIK"),n.qZA(),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(2),n.Oqu(null==e.survey?null:e.survey.title.en_US),n.xp6(4),n.s9C("href",e.survey_sim_link,n.LSH)}}function U(e,t){if(1&e&&n._UZ(0,"app-final-calculation",12),2&e){const e=n.oxw();n.Q6J("survey",e.survey)("email",e.email)("smi_survey_code",e.smi_survey_code)}}let k=(()=>{class e{constructor(e,t,i){this.service=e,this.messageService=t,this.authService=i,this.survey=null,this.email=null,this.activeIndex=0,this.survey_sim_link="",this.smi_survey_code=null,this.email=this.authService.email(),this.smi_survey_code=o.N.smi_survey_code,this.smi_survey_code?this.getSurvey():this.messageService.add({key:"toast-notif",severity:"warning",summary:"Informasi",detail:"Survey Code Belum Tersedia"})}ngOnInit(){}getSurvey(){this.service.surveys({survey_code:this.smi_survey_code}).subscribe(e=>{e.data.length>0?(this.survey=e.data[0],this.survey_sim_link=`${o.N.url_smi}survey/start/${this.survey.access_token}`):this.messageService.add({key:"toast-notif",severity:"info",summary:"Informasi",detail:"Data Tidak Tesedia"})},e=>{this.messageService.add({key:"toast-notif",severity:"error",summary:"Error",detail:e.error})})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(p),n.Y36(c.ez),n.Y36(d.$))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-survey"]],decls:11,vars:3,consts:[[1,"p-grid"],[1,"p-col-12","p-pb-0"],[1,"card"],[1,"p-field","p-grid","p-mb-0"],[1,"p-md-12","p-lg-4"],["class","card",4,"ngIf"],[1,"p-col-12"],["orientation","left",3,"activeIndex","activeIndexChange"],["header","Report","leftIcon","pi pi-pencil",3,"cache"],["pTemplate","content"],[1,"p-text-bold"],["target","_blank",3,"href"],[3,"survey","email","smi_survey_code"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"div",3),n.TgZ(4,"div",4),n.YNc(5,b,8,2,"div",5),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(6,"div",6),n.TgZ(7,"div",2),n.TgZ(8,"p-tabView",7),n.NdJ("activeIndexChange",function(e){return t.activeIndex=e}),n.TgZ(9,"p-tabPanel",8),n.YNc(10,U,1,3,"ng-template",9),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(5),n.Q6J("ngIf",t.survey),n.xp6(3),n.Q6J("activeIndex",t.activeIndex),n.xp6(1),n.Q6J("cache",!1))},directives:[u.O5,m.xf,m.x4,c.jx,x],styles:[""]}),e})();var S=i(1462),w=i(7210),J=i(3487);let I=(()=>{class e{constructor(e,t,i,s,a){this.fb=e,this.dialog=t,this.smiService=i,this.config=s,this.ref=a,this.animation=!0,this.multiple=!1,this.fileUploadControl=new w.LK({accept:[],discardInvalid:!0},[]),this.callback=new n.vpe,this.forms=this.fb.group({files:[null,S.kI.required]})}ngOnChanges(e){this.fileType&&(this.fileUploadControl.acceptFiles(this.fileType),this.forms.controls.files.setValidators(w.Fz.accept([this.fileType]))),this.fileSelected&&this.forms.patchValue({files:[new File([""],this.fileSelected.namafile)]}),this.forms.valueChanges.subscribe(e=>{0==e.files.length&&this.callback.emit({removed:!0})})}ngOnInit(){}selectFiles(){if(this.forms.valid){let e=this.forms.value.files[0],t=new FormData;if(e){t.append("file",e),t.append("email",this.config.data.email),t.append("userid",this.config.data.userid),t.append("dokumen_id",this.config.data.dokumen_id);const i=this.dialog.open(J.m,{data:{message:"Uploading File..."}});this.smiService.upload_file(t).subscribe(e=>{i.close(!0),e&&this.ref.close(e)},e=>{i.close(!0)})}}}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(S.qu),n.Y36(g.xA),n.Y36(p),n.Y36(g.S),n.Y36(g.E7))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-upload-dokumen"]],inputs:{direktori:"direktori",fileSelected:"fileSelected",fileType:"fileType"},outputs:{callback:"callback"},features:[n.TTD],decls:2,vars:4,consts:[[3,"formGroup"],["formControlName","files",3,"control","multiple","animation","change","drop"]],template:function(e,t){1&e&&(n.TgZ(0,"form",0),n.TgZ(1,"file-upload",1),n.NdJ("change",function(){return t.selectFiles()})("drop",function(){return t.selectFiles()}),n.qZA(),n.qZA()),2&e&&(n.Q6J("formGroup",t.forms),n.xp6(1),n.Q6J("control",t.fileUploadControl)("multiple",t.multiple)("animation",t.animation))},directives:[S._Y,S.JL,S.sg,w.Yr,S.JJ,S.u],styles:[""]}),e})();var C=i(4745),Q=i(6726),Y=i(6239),N=i(7593);function O(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",10),n._UZ(1,"div"),n.TgZ(2,"div"),n.TgZ(3,"span",11),n._UZ(4,"i",12),n.TgZ(5,"input",13),n.NdJ("input",function(t){return n.CHM(e),n.oxw(),n.MAs(4).filterGlobal(t.target.value,"contains")}),n.qZA(),n.qZA(),n.qZA(),n.qZA()}}function F(e,t){1&e&&(n.TgZ(0,"tr"),n.TgZ(1,"th",14),n._uU(2,"No "),n.TgZ(3,"span",15),n._UZ(4,"p-sortIcon",16),n.qZA(),n.qZA(),n.TgZ(5,"th",17),n._uU(6,"Criteria "),n.TgZ(7,"span",15),n._UZ(8,"p-sortIcon",16),n.qZA(),n.qZA(),n.TgZ(9,"th",17),n._uU(10,"Document Name "),n.TgZ(11,"span",15),n._UZ(12,"p-sortIcon",16),n.qZA(),n.qZA(),n.TgZ(13,"th",17),n._uU(14,"File Name "),n.TgZ(15,"span",15),n._UZ(16,"p-sortIcon",16),n.qZA(),n.qZA(),n.TgZ(17,"th",17),n._uU(18,"Is Uploaded "),n.TgZ(19,"span",15),n._UZ(20,"p-sortIcon",16),n.qZA(),n.qZA(),n.TgZ(21,"th",17),n._uU(22,"Bobot "),n.TgZ(23,"span",15),n._UZ(24,"p-sortIcon",16),n.qZA(),n.qZA(),n.TgZ(25,"th",17),n._uU(26,"Value "),n.TgZ(27,"span",15),n._UZ(28,"p-sortIcon",16),n.qZA(),n.qZA(),n.TgZ(29,"th",18),n._uU(30,"Pilih"),n.qZA(),n.qZA()),2&e&&(n.xp6(1),n.Q6J("pSortableColumn","sequence_id"),n.xp6(3),n.Q6J("field","sequence_id"),n.xp6(1),n.Q6J("pSortableColumn","criteria"),n.xp6(3),n.Q6J("field","criteria"),n.xp6(1),n.Q6J("pSortableColumn","dokumen_name"),n.xp6(3),n.Q6J("field","dokumen_name"),n.xp6(1),n.Q6J("pSortableColumn","file_name"),n.xp6(3),n.Q6J("field","file_name"),n.xp6(1),n.Q6J("pSortableColumn","is_uploaded"),n.xp6(3),n.Q6J("field","is_uploaded"),n.xp6(1),n.Q6J("pSortableColumn","bobot"),n.xp6(3),n.Q6J("field","bobot"),n.xp6(1),n.Q6J("pSortableColumn","value"),n.xp6(3),n.Q6J("field","value"))}function D(e,t){1&e&&n._UZ(0,"i",25)}function P(e,t){1&e&&n._UZ(0,"i",26)}function R(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",27),n.NdJ("click",function(){n.CHM(e);const t=n.oxw().$implicit;return n.oxw().download(t)}),n.qZA()}}function $(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"tr"),n.TgZ(1,"td",19),n._uU(2),n.qZA(),n.TgZ(3,"td",20),n._uU(4),n.qZA(),n.TgZ(5,"td",20),n._uU(6),n.qZA(),n.TgZ(7,"td",20),n._uU(8),n.qZA(),n.TgZ(9,"td",19),n.YNc(10,D,1,0,"i",21),n.YNc(11,P,1,0,"i",22),n.qZA(),n.TgZ(12,"td",19),n._uU(13),n.qZA(),n.TgZ(14,"td",19),n._uU(15),n.qZA(),n.TgZ(16,"td",19),n.TgZ(17,"button",23),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw().upload(t)}),n.qZA(),n.YNc(18,R,1,0,"button",24),n.qZA(),n.qZA()}if(2&e){const e=t.$implicit;n.xp6(2),n.Oqu(e.sequence_id),n.xp6(2),n.Oqu(e.criteria),n.xp6(2),n.Oqu(e.dokumen_name),n.xp6(2),n.Oqu(e.file_name),n.xp6(2),n.Q6J("ngIf",e.is_uploaded),n.xp6(1),n.Q6J("ngIf",!e.is_uploaded),n.xp6(2),n.Oqu(e.bobot),n.xp6(2),n.Oqu(e.value),n.xp6(3),n.Q6J("ngIf",e.is_uploaded)}}function L(e,t){1&e&&(n.TgZ(0,"tr"),n.TgZ(1,"td",19),n._uU(2," Data tidak Tersedia "),n.qZA(),n.qZA()),2&e&&(n.xp6(1),n.uIk("colspan",8))}const M=function(){return[25,50,75,100]},H=function(){return["sequence_id","criteria","dokumen_name","file_name"]},B=[{path:"survey",component:k,canActivate:[a.t],data:{setTitle:"Survey"}},{path:"upload-document",component:(()=>{class e{constructor(e,t,i,s,a,o){this.dialog=e,this.messageService=t,this.router=i,this.authService=s,this.helper=a,this.smiService=o,this.loading=!1,this.listdata=[],this.msgs=[]}ngOnInit(){this.gets()}gets(){const e={email:this.authService.email(),survey_code:o.N.smi_survey_code};this.loading&&(this.loading=!0),this.listdata=[],this.smiService.uploaded_files(e).subscribe(e=>{e.data.length>0?this.listdata=e.data:this.messageService.add({key:"toast-notif",severity:"info",summary:"Informasi",detail:"Data Tidak Tesedia"}),this.loading=!1},e=>{this.loading=!1,this.messageService.add({key:"toast-notif",severity:"error",summary:"Error",detail:e.error})})}upload(e){this.dialog.open(I,{width:"900px",header:"Upload Document",data:{email:this.authService.email(),userid:1,dokumen_id:e.dokumen_id}}).onClose.subscribe(e=>{e&&e.data.length>0&&(this.listdata=this.listdata.map(t=>t.dokumen_id===e.data[0].dokumen_id?e.data[0]:t),this.messageService.add({key:"toast-notif",severity:"success",summary:"Success",detail:"Document uploaded successfully."}))})}download(e){this.smiService.downloadFile(e.dokumen_id).subscribe(t=>{const i=document.createElement("a"),s=URL.createObjectURL(t);i.href=s,i.download=`${e.file_name}`,i.click(),URL.revokeObjectURL(s)},e=>{console.error("Download failed:",e)})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(g.xA),n.Y36(c.ez),n.Y36(s.F0),n.Y36(d.$),n.Y36(C.$),n.Y36(p))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-upload-dokumen"]],decls:11,vars:10,consts:[[1,"card"],[1,"p-fluid"],[1,"p-col-12"],["styleClass","p-datatable-gridlines","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","rowHover","rows","rowsPerPageOptions","showCurrentPageReport","globalFilterFields"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"value"],[1,"p-d-flex","p-jc-between"],[1,"p-input-icon-left","p-ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search keyword",3,"input"],[2,"width","5%","text-align","center",3,"pSortableColumn"],[2,"float","right"],["ariaLabel","Activate to sort","ariaLabelDesc","Activate to sort in descending order","ariaLabelAsc","Activate to sort in ascending order",3,"field"],[2,"text-align","center",3,"pSortableColumn"],[2,"width","10%","text-align","center"],[2,"text-align","center"],[2,"text-align","left"],["class","fa fa-check","style","color: #1e7e34",4,"ngIf"],["class","fa fa-close","style","color: #5d0c28",4,"ngIf"],["pButton","","pRipple","","type","button","icon","pi pi-upload","pTooltip","Upload","iconPos","left",1,"p-button-success","p-button-sm","p-mr-2",3,"click"],["pButton","","pRipple","","type","button","icon","pi pi-download","pTooltip","Download","iconPos","left","class","p-button-warning p-button-sm",3,"click",4,"ngIf"],[1,"fa","fa-check",2,"color","#1e7e34"],[1,"fa","fa-close",2,"color","#5d0c28"],["pButton","","pRipple","","type","button","icon","pi pi-download","pTooltip","Download","iconPos","left",1,"p-button-warning","p-button-sm",3,"click"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"p-table",3,4),n.YNc(5,O,6,0,"ng-template",5),n.YNc(6,F,31,14,"ng-template",6),n.YNc(7,$,19,9,"ng-template",7),n.YNc(8,L,3,1,"ng-template",8),n.qZA(),n.qZA(),n.TgZ(9,"div",2),n._UZ(10,"p-messages",9),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(3),n.Q6J("value",t.listdata)("paginator",!0)("rowHover",!0)("rows",20)("rowsPerPageOptions",n.DdM(8,M))("showCurrentPageReport",!0)("globalFilterFields",n.DdM(9,H)),n.xp6(7),n.Q6J("value",t.msgs))},directives:[f.iA,c.jx,Z.V,h.o,f.lQ,f.fz,u.O5,Q.Hq,Y.H,N.u],styles:[""]}),e})(),canActivate:[a.t],data:{setTitle:"Upload Document"}}];let j=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[s.Bz.forChild(B)],s.Bz]}),e})();var z=i(2744),E=i(5425);let V=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[z.I,E.m,j]]}),e})()}}]);